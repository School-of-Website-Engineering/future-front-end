import{i as s,m as r,U as e,x as i,j as o,z as a,V as t,n as l,u as m,w as n,W as d,e as u,v as c,p,l as g}from"./vendor-d9fce5dd.js";import{a as h,L as _,u as F,_ as v}from"./index-5ecedcfa.js";const b=F(),w={name:"LoginBox",data:()=>({isLogin:!0,loginForm:{username:"admin",email:"1960638223@qq.com",password:"123456789o",smsCode:"123456"},registerForm:{name:"adi",email:"1960638223@qq.com",password:"123456",smsCode:"123456",role:"man"},isLoding:!1,getSms:"获取验证码",errors:{username:"",email:"",password:"",smsCode:""},rules:{username:{required:!0,message:"请输入用户名"},email:{required:!0,type:"email",message:"请输入正确的邮箱地址"},password:{required:!0,message:"请输入密码"},smsCode:{required:!0,message:"请输入验证码"}}}),methods:{login(){b.userLogin(this.loginForm)},async register(){const s=h(_.getRegister.bind(_)),{code:r,reason:e}=await s(this.registerForm);200===r?(this.$message.success(e),this.$router.push("./main")):this.$message.error(e)},async getEmailSms(){if(this.isLoding)return;this.isLoding=!0;let s=60;this.getSms=`${s}s`;const r=setInterval((()=>{s--,this.getSms=`${s}s`,s<=0&&(clearInterval(r),this.getSms="获取验证码",this.isLoding=!1)}),1e3),e=h(_.getSmsCode.bind(_)),{code:i,reason:o,data:a}=await e(this.loginForm.email);200===i?this.$message.success(o):this.$message.error(o)},validateForm(){let s=!0;this.errors={};for(let r in this.rules)this.rules[r].required&&!this.loginForm[r]?(this.errors[r]=this.rules[r].message,s=!1):"email"!==this.rules[r].type||this.validateEmail(this.loginForm[r])||(this.errors[r]=this.rules[r].message,s=!1);return s},validateFormRegister(){let s=!0;this.errors={};for(let r in this.rules)this.rules[r].required&&!this.registerForm[r]?(this.errors[r]=this.rules[r].message,s=!1):"email"!==this.rules[r].type||this.validateEmail(this.registerForm[r])||(this.errors[r]=this.rules[r].message,s=!1);return s},validateEmail:s=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s),submitForm(){this.validateForm()&&this.login()},submitFormRegister(){this.validateFormRegister()&&this.register()},isErrorShow(){this.isLogin=!this.isLogin,this.loginForm={username:"",email:"",password:"",smsCode:""},this.registerForm={name:"",email:"",password:""},this.errors={username:"",email:"",password:"",smsCode:""}}}},y=s=>(p("data-v-c7dc18db"),s=s(),g(),s),C={class:"main-box"},f=y((()=>r("h2",{class:"title"},"创建帐户",-1))),x=y((()=>r("span",{class:"text"},"或使用电子邮件进行注册",-1))),L={class:"input-box"},k={key:0,class:"error__message"},S={class:"input-box"},q={key:0,class:"error__message"},E={class:"input-box"},U={key:0,class:"error__message"},V={class:"sms-code"},R={key:0,class:"error__message"},$=y((()=>r("h2",{class:"title"},"登录网站",-1))),z=y((()=>r("span",{class:"text"},"或在左侧进行注册",-1))),j={class:"input-box"},A={key:0,class:"error__message"},I={class:"input-box"},Z={key:0,class:"error__message"},B={class:"input-box"},W={key:0,class:"error__message"},D={class:"sms-code"},G={key:0,class:"error__message"},H=y((()=>r("div",{class:"switch__circle"},null,-1))),J=y((()=>r("div",{class:"switch__circle switch__circle_top"},null,-1))),K={class:"switch__container"},M=v(w,[["render",function(p,g){const h=d;return u(),s("div",C,[r("div",{class:l(["container","container-register",{"is-txl":p.isLogin}])},[r("form",{class:"register-form",onSubmit:g[9]||(g[9]=e(((...s)=>p.submitFormRegister&&p.submitFormRegister(...s)),["prevent"]))},[f,x,r("div",L,[p.errors.username?(u(),s("div",k,i(p.errors.username),1)):o("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.username}]),type:"text",placeholder:"用户名","onUpdate:modelValue":g[0]||(g[0]=s=>p.registerForm.username=s),onFocus:g[1]||(g[1]=s=>p.errors.username="")},null,34),[[t,p.registerForm.username]])]),r("div",S,[p.errors.email?(u(),s("div",q,i(p.errors.email),1)):o("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.email}]),type:"text",placeholder:"邮箱","onUpdate:modelValue":g[2]||(g[2]=s=>p.registerForm.email=s),onFocus:g[3]||(g[3]=s=>p.errors.email="")},null,34),[[t,p.registerForm.email]])]),r("div",E,[p.errors.password?(u(),s("div",U,i(p.errors.password),1)):o("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.password}]),type:"password",placeholder:"密码","onUpdate:modelValue":g[4]||(g[4]=s=>p.registerForm.password=s),onFocus:g[5]||(g[5]=s=>p.errors.password="")},null,34),[[t,p.registerForm.password]])]),r("div",V,[p.errors.smsCode?(u(),s("div",R,i(p.errors.smsCode),1)):o("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.smsCode}]),type:"text",placeholder:"验证码","onUpdate:modelValue":g[6]||(g[6]=s=>p.registerForm.smsCode=s),onFocus:g[7]||(g[7]=s=>p.errors.smsCode="")},null,34),[[t,p.registerForm.smsCode]]),m(h,{onClick:p.getEmailSms,disabled:p.isLoding,class:"primary-btn"},{default:n((()=>[c(i(p.getSms),1)])),_:1},8,["onClick","disabled"])]),r("div",{class:"primary-btn",onClick:g[8]||(g[8]=(...s)=>p.submitFormRegister&&p.submitFormRegister(...s))},"立即注册")],32)],2),r("div",{class:l(["container","container-login",{"is-txl is-z200":p.isLogin}])},[r("form",{class:"login-form",onSubmit:g[19]||(g[19]=e(((...s)=>p.submitForm&&p.submitForm(...s)),["prevent"]))},[$,z,r("div",j,[p.errors.username?(u(),s("div",A,i(p.errors.username),1)):o("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.username}]),type:"text",placeholder:"用户名","onUpdate:modelValue":g[10]||(g[10]=s=>p.loginForm.username=s),onFocus:g[11]||(g[11]=s=>p.errors.username="")},null,34),[[t,p.loginForm.username]])]),r("div",I,[p.errors.email?(u(),s("div",Z,i(p.errors.email),1)):o("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.email}]),type:"text",placeholder:"邮箱","onUpdate:modelValue":g[12]||(g[12]=s=>p.loginForm.email=s),onFocus:g[13]||(g[13]=s=>p.errors.email="")},null,34),[[t,p.loginForm.email]])]),r("div",B,[p.errors.password?(u(),s("div",W,i(p.errors.password),1)):o("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.password}]),type:"password",placeholder:"密码","onUpdate:modelValue":g[14]||(g[14]=s=>p.loginForm.password=s),onFocus:g[15]||(g[15]=s=>p.errors.password="")},null,34),[[t,p.loginForm.password]])]),r("div",D,[p.errors.smsCode?(u(),s("div",G,i(p.errors.smsCode),1)):o("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.smsCode}]),type:"text",placeholder:"验证码","onUpdate:modelValue":g[16]||(g[16]=s=>p.loginForm.smsCode=s),onFocus:g[17]||(g[17]=s=>p.errors.smsCode="")},null,34),[[t,p.loginForm.smsCode]]),m(h,{onClick:p.getEmailSms,disabled:p.isLoding,class:"primary-btn"},{default:n((()=>[c(i(p.getSms),1)])),_:1},8,["onClick","disabled"])]),r("div",{class:"primary-btn",onClick:g[18]||(g[18]=(...s)=>p.submitForm&&p.submitForm(...s))},"立即登录")],32)],2),r("div",{class:l(["switch",{login:p.isLogin}])},[H,J,r("div",K,[r("h2",null,i(p.isLogin?"你好，陌生人 !":"欢迎回来 !"),1),r("p",null,i(p.isLogin?"输入您的个人详细信息并开始我们的旅程":"要与我们保持联系，请使用您的个人信息登录"),1),r("div",{class:"primary-btn",onClick:g[20]||(g[20]=(...s)=>p.isErrorShow&&p.isErrorShow(...s))},i(p.isLogin?"立即注册":"立即登录"),1)])],2)])}],["__scopeId","data-v-c7dc18db"]]);export{M as default};
