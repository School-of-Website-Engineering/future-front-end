import{o as e,c as t,r as s,E as n,a,d as i,b as r,e as o,f as d,g as l,h as c,n as u,w as p,i as f,j as m,p as h,k as g,l as _,t as y,m as v,q as L,s as R,u as E,v as b,x as P,y as F,z as k,F as I,A as O,B as T,C as w,D as x,G as j,H as S,I as D,J as A,K as M,L as V,M as $,N,O as U,P as C,Q as q,R as B}from"./vendor-81c1d278.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const J=(e,t)=>{const s=e.__vccOpts||e;for(const[n,a]of t)s[n]=a;return s},K=J({},[["render",function(n,a){const i=s("router-view");return e(),t(i)}]]);a.defaults.baseURL="/api-pro",a.defaults.timeout=1e4,a.defaults.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8";const W=a.create({responseType:"json",transformResponse:[function(e){try{e=JSON.parse(e)}catch(t){}return e}]});W.interceptors.request.use((e=>(e.headers={...e.headers},e)),(e=>Promise.reject(e)));const G={404:new class{handle(e){const{reason:t}=e.data;t&&n.error(t)}},112:new class{handle(e){n.error("Token expired")}},212:new class{handle(e){n.error("No permission")}}};W.interceptors.response.use((e=>{const{code:t}=e.data;if(0!==t){const s=G[t];null==s||s.handle(e)}return e}),(e=>{var t;return t=e.message,n.error(t),Promise.reject(e)}));const z=e=>new Promise(((t,s)=>{W.request(e).then((e=>{t(e.data)})).catch((e=>{}))})),H={get:(e,t={},s)=>z({url:e,params:t,...s,method:"GET"}),post:(e,t={},s)=>z({url:e,data:t,...s,method:"POST"}),put:(e,t={},s)=>z({url:e,data:t,...s,method:"PUT"}),delete:(e,t={},s)=>z({url:e,data:t,...s,method:"DELETE"}),upload:(e,t={},s)=>z({url:e,data:t,...s,method:"POST",headers:{"Content-Type":"multipart/form-data"}})};function Q(e){return async function(...t){try{return await e(...t)}catch(s){throw e.name,s}}}function X(e){for(const t of Object.getOwnPropertyNames(e.prototype)){const s=Object.getOwnPropertyDescriptor(e.prototype,t);s&&"function"==typeof s.value&&(e.prototype[t]=Q(s.value))}return e}Object.defineProperty,Object.getOwnPropertyDescriptor;let Y=class{async getUserFriends(){return await H.get("/user/friends")}async getUserFriendsPending(){return await H.get("/user/friends/pending")}async getUserFriendsBlocked(){return await H.get("/user/friends/blocked")}async getUserInfo(e){return await H.post("/relationships/getFriendByUserId2",{userId:e})}};Y=((e,t,s,n)=>{for(var a,i=t,r=e.length-1;r>=0;r--)(a=e[r])&&(i=a(i)||i);return i})([X],Y);const Z=new Y,ee=i("friends",{state:()=>({friends:[],pendingFriends:[],pendingFriendsList:[],pendingFriendsRequestList:[],onlineFriendsList:[],blockedFriends:[]}),getters:{handlePendingFriendsList:e=>(e.pendingFriendsList=e.pendingFriends.filter((e=>!e.isInitiative)).concat(e.pendingFriends.filter((e=>e.isInitiative))),e.pendingFriendsList),handlePendingFriendsRequestList:e=>(e.pendingFriendsRequestList=e.pendingFriends.filter((e=>!e.isInitiative)),e.pendingFriendsRequestList),handleOnlineFriendsList:e=>(e.onlineFriendsList=e.friends.filter((e=>"offline"!==e.status)),e.onlineFriendsList)},actions:{async getFriends(){const{data:e,code:t}=await Z.getUserFriends();0===t&&(this.friends=e.friends||[])},async getPendingFriends(){const{data:e,code:t}=await Z.getUserFriendsPending();0===t&&(this.pendingFriends=e.friends||[])},async getBlockedFriends(){const{data:e,code:t}=await Z.getUserFriendsBlocked();0===t&&(this.blockedFriends=e.friends||[])}}}),te=i("privateLetter",{state:()=>({privateLetterCount:[]}),getters:{getPrivateLetterCount:e=>(e.privateLetterCount=ee().handlePendingFriendsRequestList,e.privateLetterCount)},actions:{}}),se=r(),ne={},ae=function(e,t,s){if(!t||0===t.length)return e();const n=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e="/"+e)in ne)return;ne[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(s)for(let s=n.length-1;s>=0;s--){const a=n[s];if(a.href===e&&(!t||"stylesheet"===a.rel))return}else if(document.querySelector(`link[href="${e}"]${a}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),t?new Promise(((t,s)=>{i.addEventListener("load",t),i.addEventListener("error",(()=>s(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))},ie=[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:()=>ae((()=>import("./index-db1b51af.js")),["assets/index-db1b51af.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css","assets/index-74c1f3e4.css"])},{path:"/login",name:"login",component:()=>ae((()=>import("./index-1213bf1a.js")),["assets/index-1213bf1a.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css","assets/index-fc7febe0.css"])},{path:"/main",name:"main",component:()=>ae((()=>import("./index-ef7f9a35.js")),["assets/index-ef7f9a35.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css","assets/index-8b4c806a.js","assets/index-94c34ac0.css"]),children:[{path:"/main/@me",name:"message",components:{leftAside:()=>ae((()=>import("./index-844b0deb.js")),["assets/index-844b0deb.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css","assets/index-8b4c806a.js","assets/index-f0fd7216.css"]),rightMain:()=>ae((()=>import("./index-32535df0.js")),["assets/index-32535df0.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css","assets/index-8d6955b3.css"])}},{path:"/main/@me/:id",name:"chat",components:{leftAside:()=>ae((()=>import("./index-844b0deb.js")),["assets/index-844b0deb.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css","assets/index-8b4c806a.js","assets/index-f0fd7216.css"]),rightMain:()=>ae((()=>import("./index-e2f37f3f.js")),["assets/index-e2f37f3f.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css"])},props:!0},{path:"/channels/:id",name:"channels",components:{leftAside:()=>ae((()=>import("./index-8e005ea7.js")),["assets/index-8e005ea7.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css"]),rightMain:()=>ae((()=>import("./index-32535df0.js")),["assets/index-32535df0.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css","assets/index-8d6955b3.css"])},props:!0},{path:"/main/@me",name:"friend",components:{leftAside:()=>ae((()=>import("./index-844b0deb.js")),["assets/index-844b0deb.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css","assets/index-8b4c806a.js","assets/index-f0fd7216.css"]),rightMain:()=>ae((()=>import("./index-32535df0.js")),["assets/index-32535df0.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css","assets/index-8d6955b3.css"])}},{path:"/main/store",name:"friend",components:{leftAside:()=>ae((()=>import("./index-844b0deb.js")),["assets/index-844b0deb.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css","assets/index-8b4c806a.js","assets/index-f0fd7216.css"]),rightMain:()=>ae((()=>import("./index-60c72d62.js")),["assets/index-60c72d62.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css"])}}]},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>ae((()=>import("./NotFound-30b9778c.js")),["assets/NotFound-30b9778c.js","assets/vendor-81c1d278.js","assets/vendor-56a91924.css","assets/NotFound-383f6438.css"])}],re=o({history:d("/"),routes:ie,scrollBehavior:()=>({left:0,top:0})});re.beforeEach(((e,t,s)=>{"/main"===e.path?s("/main/@me"):s()}));const oe=e=>(h("data-v-59a19988"),e=e(),g(),e),de={class:"friendStatus"},le=oe((()=>_("div",{class:"status-online"},null,-1))),ce=oe((()=>_("div",{class:"status-idle"},null,-1))),ue=oe((()=>_("div",{class:"status-offline"},null,-1))),pe=oe((()=>_("div",{class:"status-busy"},null,-1))),fe=J(l({__name:"FriendStatus",props:{status:{type:String,default:"online"},statusText:{type:String,default:""}},setup:s=>(n,a)=>{const i=m;return e(),c("div",de,[s.statusText?"online"===s.status?(e(),t(i,{key:1,"hide-after":50,enterable:!1,effect:"dark",content:s.statusText,placement:"top"},{default:p((()=>[le])),_:1},8,["content"])):"idle"===s.status?(e(),t(i,{key:2,"hide-after":50,enterable:!1,effect:"dark",content:s.statusText,placement:"top"},{default:p((()=>[ce])),_:1},8,["content"])):"offline"===s.status?(e(),t(i,{key:3,"hide-after":50,enterable:!1,effect:"dark",content:s.statusText,placement:"top"},{default:p((()=>[ue])),_:1},8,["content"])):"busy"===s.status?(e(),t(i,{key:4,"hide-after":50,enterable:!1,effect:"dark",content:s.statusText,placement:"top"},{default:p((()=>[pe])),_:1},8,["content"])):f("",!0):(e(),c("div",{key:0,class:u(["online"===s.status?"status-online":"idle"===s.status?"status-idle":"offline"===s.status?"status-offline":"status-busy"])},null,2))])}}),[["__scopeId","data-v-59a19988"]]),me={class:"friends-avatar"},he={class:"friends-info"},ge={class:"friends-name"},_e=J({__name:"FriendList",props:{item:{type:Object,default:()=>({id:0,name:"",avatar:"",status:"online",isInitiative:!1})},statusMap:Object,isInitiativeMap:Object,iconLeft:{type:String,default:""},iconRight:{type:String,default:""},status:{type:String,default:""}},setup(s){const n=s,{item:a,statusMap:i,isInitiativeMap:r,iconLeft:o,iconRight:d,status:l}=y(n),h={ToBeDetermined:{iconLeftMessage:"接受",iconRightMessage:"忽略"},all:{iconLeftMessage:"消息",iconRightMessage:"更多"},blocked:{iconRightMessage:"解除屏蔽"}},g=v((()=>({...h,[l.value]:h[l.value]})));L({STATUS_PROPS:h});const T=e=>{e.stopPropagation()},w=e=>{T(e)},x=e=>{T(e)};return(s,n)=>{var a,h;const y=O,v=fe,L=m;return e(),c(I,null,[_("div",me,[R(y,{class:"avatar",src:s.$props.item.avatar},null,8,["src"]),_("div",he,[_("div",ge,[E(b(s.$props.item.name)+" ",1),_("p",null,"#"+b(s.$props.item.id),1)]),_("div",{class:u([P(i)[s.$props.status]&&P(i)[s.$props.status],"friends-status"])},b(P(i)[s.$props.item.status]?P(i)[s.$props.item.status]:P(r)[s.$props.item.isInitiative]?P(r)[s.$props.item.isInitiative]:"已屏蔽"),3),"blocked"!==P(l)?(e(),t(v,{status:s.$props.status,key:s.$props.status},null,8,["status"])):f("",!0)])]),P(o)||P(d)?(e(),c("div",{key:0,class:u(["friends-more",{"deleteFriends addFriends":"ToBeDetermined"===s.$props.status||"blocked"===s.$props.status}])},[R(L,{class:"box-item","hide-after":50,enterable:!1,content:null==(a=P(g)[s.$props.status])?void 0:a.iconLeftMessage,placement:"top"},{default:p((()=>[F(_("span",{class:"span-hover2",onClick:x},[_("i",{class:u(P(o))},null,2)],512),[[k,P(o)&&!s.$props.item.isInitiative]])])),_:1},8,["content"]),R(L,{"hide-after":50,enterable:!1,class:"box-item",content:null==(h=P(g)[s.$props.status])?void 0:h.iconRightMessage,placement:"top"},{default:p((()=>[P(d)?(e(),c("span",{key:0,class:"span-hover1",onClick:w},[_("i",{class:u(P(d))},null,2)])):f("",!0)])),_:1},8,["content"])],2)):f("",!0)],64)}}},[["__scopeId","data-v-c122471d"]]),ye={class:"search-box-header-top",style:{width:"770px"}},ve={class:"search-box"},Le=(Fe=()=>_("i",{class:"fa-solid fa-magnifying-glass"},null,-1),h("data-v-77a99e46"),Fe=Fe(),g(),Fe),Re={class:"title-x4dI75 container-q97qHp"},Ee={key:0,class:"placeholder"},be=["onClick"],Pe=J(l({__name:"FriendsDisplay",props:{titleText:{type:String,default:""},status:{type:String,default:"online"},list:{type:Array,default:()=>[]},iconLeft:{type:String,default:""},iconRight:{type:String,default:""}},setup(t){const s=t,n=T(""),a=T(!1),i=[{date:"2016-05-02",name:"John Smith",address:"No.1518,  Jinshajiang Road, Putuo District"},{date:"2016-05-04",name:"John Smith",address:"No.1518,  Jinshajiang Road, Putuo District"},{date:"2016-05-01",name:"John Smith",address:"No.1518,  Jinshajiang Road, Putuo District"},{date:"2016-05-03",name:"John Smith",address:"No.1518,  Jinshajiang Road, Putuo District"}];l({name:"FriendsDisplay",components:{Friend:_e}});const r={online:"在线",offline:"离线",busy:"忙碌",away:"离开"},o={true:"送出的好友请求",false:"收到好友请求"},d=()=>{},u=Q((async e=>{["addFriend","blocked","ToBeDetermined"].includes(s.status)?a.value=!0:await re.push(`/main/@me/${e.id}`)}));return(t,l)=>{const f=j,m=D,h=A,g=S;return e(),c(I,null,[_("div",ye,[_("div",ve,[R(f,{class:"search-box-input",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),placeholder:"搜索",onKeyup:w(d,["enter","native"])},null,8,["modelValue","onKeyup"]),Le]),_("h2",Re,b(s.titleText)+" — "+b(s.list.length),1)]),0===s.list.length?(e(),c("div",Ee)):(e(!0),c(I,{key:1},x(s.list,((t,n)=>(e(),c("div",{class:"friends-list",key:n,onClick:e=>P(u)(t),style:{width:"755px"}},[R(_e,{item:t,statusMap:r,isInitiativeMap:o,"icon-left":s.iconLeft,"icon-right":s.iconRight,status:s.status},null,8,["item","icon-left","icon-right","status"])],8,be)))),128)),R(g,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value=e),title:"Shipping address"},{default:p((()=>[R(h,{data:i},{default:p((()=>[R(m,{property:"date",label:"Date",width:"150"}),R(m,{property:"name",label:"Name",width:"200"}),R(m,{property:"address",label:"Address"})])),_:1})])),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-77a99e46"]]);var Fe;const ke=M({apiKey:"AIzaSyDfzMWKXSeigISCfxGNn2oQkfKGxPnrFbs",authDomain:"future-57777.firebaseapp.com",projectId:"future-57777",storageBucket:"future-57777.appspot.com",messagingSenderId:"75290776669",appId:"1:75290776669:web:9ae574d357c5da453429b4",measurementId:"G-962YJMSFBG"});V(ke),$(ke);const Ie=N(K),Oe=r();for(const[Te,we]of Object.entries(U))Ie.component(Te,we);!function(e={}){const{immediate:t=!0,onNeedRefresh:s,onOfflineReady:n,onRegistered:a,onRegisteredSW:i,onRegisterError:r}=e,o=T(!1),d=T(!1);!function(e={}){const{immediate:t=!1,onNeedRefresh:s,onOfflineReady:n,onRegistered:a,onRegisteredSW:i,onRegisterError:r}=e;let o,d;d=async function(){if("serviceWorker"in navigator){const{Workbox:e}=await ae((()=>import("./vendor-81c1d278.js").then((e=>e.ag))),["assets/vendor-81c1d278.js","assets/vendor-56a91924.css"]);o=new e("/sw.js",{scope:"/",type:"classic"}),o.addEventListener("activated",(e=>{(e.isUpdate||e.isExternal)&&window.location.reload()})),o.addEventListener("installed",(e=>{e.isUpdate||null==n||n()})),o.register({immediate:t}).then((e=>{i?i("/sw.js",e):null==a||a(e)})).catch((e=>{null==r||r(e)}))}}()}({immediate:t,onNeedRefresh(){o.value=!0,null==s||s()},onOfflineReady(){d.value=!0,null==n||n()},onRegistered:a,onRegisteredSW:i,onRegisterError:r})}(),Ie.component("FriendStatus",fe),Ie.component("FriendsDisplay",Pe),Oe.use(C),Ie.use(Oe),Ie.use(se),Ie.use(re),Ie.use(q,{locale:B}),Ie.mount("#app");export{Z as U,J as _,Q as a,ee as b,X as c,fe as d,H as h,re as r,te as u};
